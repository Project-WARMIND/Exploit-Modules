import os
import subprocess


class SoapyHook(object):

    def __init__(self, args):
        self.args = args

    def call_soapy(self):
        for item in self.args.keys():
            if self.args[item] is None:
                self.args[item] = 1
        try:
            return subprocess.call(
                ["sudo", "python", "{}/utilities/scripts/soa.py".format(os.getcwd()),
                 "--log={}".format(self.args["log"]),
                 "--dirs={}".format(self.args["dirs"]),
                 "--line-monitor={}".format(self.args["monitor"])]
            )
        except Exception:
            return subprocess.call(
                [
                    "sudo", "python", "{}/utilities/scripts/soa.py".format(
                        os.getcwd())
                ]
            )
